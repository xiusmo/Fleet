import{r as e,a,c as l,o as s,b as r,d as o,e as t,f as u,g as i,w as n,h as d,u as p,i as m}from"./index-Eg7O6Ff6.js";import{u as c}from"./auth-BY-vmh9F.js";import{_ as g}from"./_plugin-vue_export-helper-BCo6x5W8.js";import"./index-fwOAAbVN.js";const f={class:"login-container"},b={class:"login-box"},v=g({__name:"Login",setup(g){const v=p(),h=c(),w=e({username:"",password:""}),y={username:[{required:!0,message:"请输入手机号",trigger:"blur"},{pattern:/^1[3-9]\d{9}$/,message:"请输入正确的手机号格式",trigger:"blur"}],password:[{required:!0,message:"请输入密码",trigger:"blur"},{min:6,message:"密码长度不能少于6个字符",trigger:"blur"}]},_=a(null),x=a(!1),V=a(""),j=async()=>{_.value&&await _.value.validate((async e=>{if(e){x.value=!0,V.value="";try{await h.login(w)?v.push({path:"/dashboard"}):V.value=h.error||"登录失败，请检查账号密码"}catch(a){V.value="登录过程中发生错误，请稍后再试"}finally{x.value=!1}}}))};return(e,a)=>{const p=i("el-alert"),c=i("el-input"),g=i("el-form-item"),v=i("el-button"),h=i("el-form");return s(),l("div",f,[r("div",b,[a[3]||(a[3]=r("div",{class:"login-header"},[r("h1",{class:"login-title"},"管理员控制台"),r("p",{class:"login-subtitle"},"分布式任务调度系统")],-1)),V.value?(s(),o(p,{key:0,type:"error",title:V.value,"show-icon":"",closable:!1,style:{"margin-bottom":"20px"}},null,8,["title"])):t("",!0),u(h,{ref_key:"formRef",ref:_,model:w,rules:y,"label-position":"top",onKeyup:d(j,["enter"])},{default:n((()=>[u(g,{label:"手机号",prop:"username"},{default:n((()=>[u(c,{modelValue:w.username,"onUpdate:modelValue":a[0]||(a[0]=e=>w.username=e),placeholder:"请输入手机号",type:"text",autocomplete:"username","prefix-icon":"el-icon-user"},null,8,["modelValue"])])),_:1}),u(g,{label:"密码",prop:"password"},{default:n((()=>[u(c,{modelValue:w.password,"onUpdate:modelValue":a[1]||(a[1]=e=>w.password=e),placeholder:"请输入密码",type:"password",autocomplete:"current-password","show-password":"","prefix-icon":"el-icon-lock"},null,8,["modelValue"])])),_:1}),u(g,null,{default:n((()=>[u(v,{type:"primary",loading:x.value,onClick:j,style:{width:"100%"}},{default:n((()=>a[2]||(a[2]=[m(" 登录 ")]))),_:1},8,["loading"])])),_:1})])),_:1},8,["model"])])])}}},[["__scopeId","data-v-ac8b2e32"]]);export{v as default};
